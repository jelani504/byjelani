<div class="container" fxLayout.xs="column">
  <p class="shopping-bag-title">Shopping Bag</p>
  <div [ngStyle.xs]="{'flex-direction': 'column', 'align-items': 'center'}" class="shopping-bag-container" >
      <div class="space-container"></div>
      <table [fxFlex.xs]="95" mat-table [dataSource]="userService.userBag" class="mat-elevation-z4">

      <ng-container matColumnDef="ITEM">
        <th mat-header-cell *matHeaderCellDef> ITEM </th>
        <td mat-cell *matCellDef="let product" fxLayout="row">
          <img src="{{product.product.img}}">
          <div fxLayout="column" class="item-details">
            <p class="subbrand">{{product.subBrand}}</p>
            <p class="product-name">{{product.product.name}}</p>
            <p class="product-size">Size: US {{product.selectedSize}}</p>
          </div>
        </td>
      </ng-container>
    
      <ng-container matColumnDef="PRICE">
        <th mat-header-cell *matHeaderCellDef> PRICE </th>
        <td mat-cell *matCellDef="let product"> {{product.product.price.usd.string}} </td>
      </ng-container>

       <ng-container matColumnDef="QUANTITY">
          <th mat-header-cell *matHeaderCellDef> QUANTITY </th>
          <td mat-cell *matCellDef="let product"> 
            <button (click)="userService.editQuantityInBag(product.product.id, product.selectedSize, 'incriment')" class="quantity" mat-button>
              +
            </button>
            {{product.quantity}} 
            <button (click)="userService.editQuantityInBag(product.product.id, product.selectedSize ,'decriment')" class="quantity" mat-button>
              -
            </button>
          </td>
        </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <div class="space-container">
        <mat-card>
          <p>Total: ${{vmOrderTotal.bagSubtotal}}</p>
          <p>Shipping Estimate: ${{vmOrderTotal.shippingEstimate}}</p>
          <p>Order Total: ${{vmOrderTotal.orderTotal}}</p>
          <div>
            <button class="checkout-button" (click)="navigateToCheckout()" mat-button>Checkout</button>
          </div>
        </mat-card>
      </div>
    </div>
</div>